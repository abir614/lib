const NotificationUI={elements:{settings:null,toggle:null,badge:null,status:null,statusText:null,enableBtn:null,disableBtn:null,testBtn:null,closeBtn:null},init(){this.elements.settings=document.getElementById("notificationSettings"),this.elements.toggle=document.getElementById("notificationToggle"),this.elements.badge=document.getElementById("notificationBadge"),this.elements.status=document.getElementById("notificationStatus"),this.elements.statusText=document.getElementById("statusText"),this.elements.enableBtn=document.getElementById("enableNotifications"),this.elements.disableBtn=document.getElementById("disableNotifications"),this.elements.testBtn=document.getElementById("testNotification"),this.elements.closeBtn=document.getElementById("closeSettings"),this.setupEventListeners(),this.updateUI()},setupEventListeners(){this.elements.toggle?.addEventListener("click",(()=>this.toggleSettings())),this.elements.closeBtn?.addEventListener("click",(()=>this.hideSettings())),this.elements.enableBtn?.addEventListener("click",(()=>this.enableNotifications())),this.elements.disableBtn?.addEventListener("click",(()=>this.disableNotifications())),this.elements.testBtn?.addEventListener("click",(()=>this.sendTestNotification()))},toggleSettings(){this.elements.settings.classList.contains("show")?this.hideSettings():this.showSettings()},showSettings(){this.elements.settings.classList.add("show"),this.updateUI()},hideSettings(){this.elements.settings.classList.remove("show")},updateUI(){if(!PushNotificationManager)return;const t=this.elements,e=(t,e)=>t&&e(t);let s=PushNotificationManager.getPermissionStatus();return s.isSupported?"denied"===s.permission?(this.setStatus("blocked","ðŸš« Notifications blocked. Enable in browser settings."),e(t.enableBtn,(t=>t.style.display="none")),e(t.disableBtn,(t=>t.style.display="none")),e(t.testBtn,(t=>t.style.display="none")),void e(t.badge,(t=>t.style.display="block"))):void(s.isSubscribed?(this.setStatus("enabled","âœ… Notifications enabled"),e(t.enableBtn,(t=>t.style.display="none")),e(t.disableBtn,(t=>t.style.display="block")),e(t.testBtn,(t=>t.style.display="block")),e(t.badge,(t=>t.style.display="none"))):(this.setStatus("disabled","ðŸ”• Notifications disabled"),e(t.enableBtn,(t=>t.style.display="block")),e(t.disableBtn,(t=>t.style.display="none")),e(t.testBtn,(t=>t.style.display="none")),e(t.badge,(t=>t.style.display="block")))):(this.setStatus("disabled","âŒ Not supported in this browser"),e(t.enableBtn,(t=>t.style.display="none")),e(t.disableBtn,(t=>t.style.display="none")),e(t.testBtn,(t=>t.style.display="none")),void e(t.badge,(t=>t.style.display="none")))},setStatus(t,e){this.elements.status&&(this.elements.status.className=`notification-status ${t}`),this.elements.statusText&&(this.elements.statusText.textContent=e)},async enableNotifications(){this.elements.enableBtn.disabled=!0,this.elements.enableBtn.textContent="Enabling...";let t=await PushNotificationManager.requestPermission();t.success?UIManager?.showNotification("Notifications enabled!","info"):UIManager?.showNotification(t.error||"Failed to enable notifications","error"),this.elements.enableBtn.disabled=!1,this.elements.enableBtn.textContent="Enable Notifications",this.updateUI()},async disableNotifications(){this.elements.disableBtn.disabled=!0,this.elements.disableBtn.textContent="Disabling...";let t=await PushNotificationManager.unsubscribe();t.success?UIManager?.showNotification("Notifications disabled","info"):UIManager?.showNotification(t.error||"Failed to disable notifications","error"),this.elements.disableBtn.disabled=!1,this.elements.disableBtn.textContent="Disable Notifications",this.updateUI()},async sendTestNotification(){this.elements.testBtn.disabled=!0,this.elements.testBtn.textContent="Sending...";let t=await PushNotificationManager.sendTestNotification();t.success?UIManager?.showNotification("Test notification sent!","info"):UIManager?.showNotification(t.error||"Failed to send test","error"),this.elements.testBtn.disabled=!1,this.elements.testBtn.textContent="Test Notification"},show(){this.elements.toggle&&(this.elements.toggle.style.display="flex")},hide(){this.elements.toggle&&(this.elements.toggle.style.display="none"),this.hideSettings()}};"undefined"!=typeof window&&(window.NotificationUI=NotificationUI);
