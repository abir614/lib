const NotificationUI={elements:{settings:null,toggle:null,badge:null,status:null,statusText:null,enableBtn:null,disableBtn:null,testBtn:null,closeBtn:null},init(){this.elements.settings=document.getElementById("notificationSettings"),this.elements.toggle=document.getElementById("notificationToggle"),this.elements.badge=document.getElementById("notificationBadge"),this.elements.status=document.getElementById("notificationStatus"),this.elements.statusText=document.getElementById("statusText"),this.elements.enableBtn=document.getElementById("enableNotifications"),this.elements.disableBtn=document.getElementById("disableNotifications"),this.elements.testBtn=document.getElementById("testNotification"),this.elements.closeBtn=document.getElementById("closeSettings"),this.setupEventListeners(),this.updateUI()},setupEventListeners(){this.elements.toggle?.addEventListener("click",()=>this.toggleSettings()),this.elements.closeBtn?.addEventListener("click",()=>this.hideSettings()),this.elements.enableBtn?.addEventListener("click",()=>this.enableNotifications()),this.elements.disableBtn?.addEventListener("click",()=>this.disableNotifications()),this.elements.testBtn?.addEventListener("click",()=>this.sendTestNotification())},toggleSettings(){let t=this.elements.settings.classList.contains("show");t?this.hideSettings():this.showSettings()},showSettings(){this.elements.settings.classList.add("show"),this.updateUI()},hideSettings(){this.elements.settings.classList.remove("show")},updateUI(){if(!PushNotificationManager)return;let t=PushNotificationManager.getPermissionStatus();t.isSupported?"denied"===t.permission?(this.setStatus("blocked","\uD83D\uDEAB Notifications blocked. Enable in browser settings."),this.elements.enableBtn.style.display="none",this.elements.disableBtn.style.display="none",this.elements.testBtn.style.display="none",this.elements.badge.style.display="block"):t.isSubscribed?(this.setStatus("enabled","✅ Notifications enabled"),this.elements.enableBtn.style.display="none",this.elements.disableBtn.style.display="block",this.elements.testBtn.style.display="block",this.elements.badge.style.display="none"):(this.setStatus("disabled","\uD83D\uDD15 Notifications disabled"),this.elements.enableBtn.style.display="block",this.elements.disableBtn.style.display="none",this.elements.testBtn.style.display="none",this.elements.badge.style.display="block"):(this.setStatus("disabled","❌ Not supported in this browser"),this.elements.enableBtn.style.display="none",this.elements.disableBtn.style.display="none",this.elements.testBtn.style.display="none",this.elements.badge.style.display="none")},setStatus(t,e){this.elements.status.className=`notification-status ${t}`,this.elements.statusText.textContent=e},async enableNotifications(){this.elements.enableBtn.disabled=!0,this.elements.enableBtn.textContent="Enabling...";let t=await PushNotificationManager.requestPermission();t.success?UIManager?.showNotification("Notifications enabled!","info"):UIManager?.showNotification(t.error||"Failed to enable notifications","error"),this.elements.enableBtn.disabled=!1,this.elements.enableBtn.textContent="Enable Notifications",this.updateUI()},async disableNotifications(){this.elements.disableBtn.disabled=!0,this.elements.disableBtn.textContent="Disabling...";let t=await PushNotificationManager.unsubscribe();t.success?UIManager?.showNotification("Notifications disabled","info"):UIManager?.showNotification(t.error||"Failed to disable notifications","error"),this.elements.disableBtn.disabled=!1,this.elements.disableBtn.textContent="Disable Notifications",this.updateUI()},async sendTestNotification(){this.elements.testBtn.disabled=!0,this.elements.testBtn.textContent="Sending...";let t=await PushNotificationManager.sendTestNotification();t.success?UIManager?.showNotification("Test notification sent!","info"):UIManager?.showNotification(t.error||"Failed to send test","error"),this.elements.testBtn.disabled=!1,this.elements.testBtn.textContent="Send Test Notification"},show(){this.elements.toggle&&(this.elements.toggle.style.display="flex")},hide(){this.elements.toggle&&(this.elements.toggle.style.display="none"),this.hideSettings()}};"undefined"!=typeof window&&(window.NotificationUI=NotificationUI);
