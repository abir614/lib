const NotificationUI={elements:{settings:null,toggle:null,badge:null,status:null,statusText:null,enableBtn:null,disableBtn:null,testBtn:null,closeBtn:null},init(){this.elements.settings=document.getElementById('notificationSettings');this.elements.toggle=document.getElementById('notificationToggle');this.elements.badge=document.getElementById('notificationBadge');this.elements.status=document.getElementById('notificationStatus');this.elements.statusText=document.getElementById('statusText');this.elements.enableBtn=document.getElementById('enableNotifications');this.elements.disableBtn=document.getElementById('disableNotifications');this.elements.testBtn=document.getElementById('testNotification');this.elements.closeBtn=document.getElementById('closeSettings');this.setupEventListeners();this.updateUI();},setupEventListeners(){this.elements.toggle?.addEventListener('click',()=> this.toggleSettings());this.elements.closeBtn?.addEventListener('click',()=> this.hideSettings());this.elements.enableBtn?.addEventListener('click',()=> this.enableNotifications());this.elements.disableBtn?.addEventListener('click',()=> this.disableNotifications());this.elements.testBtn?.addEventListener('click',()=> this.sendTestNotification());},toggleSettings(){const isShown=this.elements.settings.classList.contains('show');if(isShown){this.hideSettings();}else{this.showSettings();}},showSettings(){this.elements.settings.classList.add('show');this.updateUI();},hideSettings(){this.elements.settings.classList.remove('show');},updateUI(){if(!PushNotificationManager)return;const status=PushNotificationManager.getPermissionStatus();if(!status.isSupported){this.setStatus('disabled','‚ùå Not supported in this browser');this.elements.enableBtn.style.display='none';this.elements.disableBtn.style.display='none';this.elements.testBtn.style.display='none';this.elements.badge.style.display='none';}else if(status.permission==='denied'){this.setStatus('blocked','üö´ Notifications blocked. Enable in browser settings.');this.elements.enableBtn.style.display='none';this.elements.disableBtn.style.display='none';this.elements.testBtn.style.display='none';this.elements.badge.style.display='block';}else if(status.isSubscribed){this.setStatus('enabled','‚úÖ Notifications enabled');this.elements.enableBtn.style.display='none';this.elements.disableBtn.style.display='block';this.elements.testBtn.style.display='block';this.elements.badge.style.display='none';}else{this.setStatus('disabled','üîï Notifications disabled');this.elements.enableBtn.style.display='block';this.elements.disableBtn.style.display='none';this.elements.testBtn.style.display='none';this.elements.badge.style.display='block';}},setStatus(type,text){this.elements.status.className=`notification-status ${type}`;this.elements.statusText.textContent=text;},async enableNotifications(){this.elements.enableBtn.disabled=true;this.elements.enableBtn.textContent='Enabling...';const result=await PushNotificationManager.requestPermission();if(result.success){UIManager?.showNotification('Notifications enabled!','info');}else{UIManager?.showNotification(result.error || 'Failed to enable notifications','error');}this.elements.enableBtn.disabled=false;this.elements.enableBtn.textContent='Enable Notifications';this.updateUI();},async disableNotifications(){this.elements.disableBtn.disabled=true;this.elements.disableBtn.textContent='Disabling...';const result=await PushNotificationManager.unsubscribe();if(result.success){UIManager?.showNotification('Notifications disabled','info');}else{UIManager?.showNotification(result.error || 'Failed to disable notifications','error');}this.elements.disableBtn.disabled=false;this.elements.disableBtn.textContent='Disable Notifications';this.updateUI();},async sendTestNotification(){this.elements.testBtn.disabled=true;this.elements.testBtn.textContent='Sending...';const result=await PushNotificationManager.sendTestNotification();if(result.success){UIManager?.showNotification('Test notification sent!','info');}else{UIManager?.showNotification(result.error || 'Failed to send test','error');}this.elements.testBtn.disabled=false;this.elements.testBtn.textContent='Send Test Notification';},show(){if(this.elements.toggle){this.elements.toggle.style.display='flex';}},hide(){if(this.elements.toggle){this.elements.toggle.style.display='none';}this.hideSettings();}};if(typeof window !=='undefined'){window.NotificationUI=NotificationUI;}
