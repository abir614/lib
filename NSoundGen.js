const NotificationSoundSystem={audioElement:null,audioContext:null,soundEnabled:!0,audioLoaded:!1,init(){console.log("Initializing Notification Sound System..."),this.audioElement=document.getElementById("notificationSound");let t=localStorage.getItem("notificationSoundEnabled");null!==t&&(this.soundEnabled="true"===t);try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),console.log("Web Audio API initialized")}catch(e){console.warn("Web Audio API not supported:",e)}this.audioElement&&(this.audioElement.volume=.5,this.audioElement.addEventListener("canplaythrough",()=>{this.audioLoaded=!0,console.log("Notification audio file loaded successfully")}),this.audioElement.addEventListener("error",t=>{console.warn("Audio file failed to load, will use fallback beep:",t),this.audioLoaded=!1}),this.audioElement.load())},play(){if(!this.soundEnabled){console.log("Sound disabled by user");return}this.audioElement&&this.audioLoaded?(console.log("Playing notification sound from file"),this.audioElement.currentTime=0,this.audioElement.play().catch(t=>{console.log("Failed to play audio file, using fallback:",t),this.playBeep()})):(console.log("Using fallback beep sound"),this.playBeep())},playBeep(){if(!this.audioContext){console.warn("No audio context available");return}try{"suspended"===this.audioContext.state&&this.audioContext.resume();let t=this.audioContext.createOscillator(),e=this.audioContext.createGain();t.connect(e),e.connect(this.audioContext.destination),t.frequency.setValueAtTime(800,this.audioContext.currentTime),t.frequency.setValueAtTime(600,this.audioContext.currentTime+.1),t.type="sine",e.gain.setValueAtTime(0,this.audioContext.currentTime),e.gain.linearRampToValueAtTime(.3,this.audioContext.currentTime+.01),e.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.4),t.start(this.audioContext.currentTime),t.stop(this.audioContext.currentTime+.4),console.log("Beep sound played")}catch(i){console.error("Error playing beep:",i)}},toggle(t){this.soundEnabled=t,localStorage.setItem("notificationSoundEnabled",t.toString()),console.log("Notification sound",t?"enabled":"disabled")},isEnabled(){return this.soundEnabled},test(){console.log("Testing notification sound..."),console.log("Sound enabled:",this.soundEnabled),console.log("Audio loaded:",this.audioLoaded),console.log("Audio context:",this.audioContext?"Available":"Not available"),this.play()}};"undefined"!=typeof window&&(window.NotificationSoundSystem=NotificationSoundSystem);
